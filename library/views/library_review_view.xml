<?xml version="1.0" encoding="utf-8"?>
<odoo>
	  <data>
			<record id="library_review_form_view" model="ir.ui.view">
				<field name="name">Library Review Form view</field>
				<field name="model">library.review</field>
				<field name="arch" type="xml">
					<form string="Library Review" edit="0" duplicate="0">
						<sheet>
							<group>
								<field name="employee_id" widget="many2one_avatar_employee"/>
								<field name="book_id" options="{'no_create_edit':True,'no_quick_create':True,'no_create':True,'no_open':True}"/>
								<field name="rating" widget="priority"/>
							</group>
							<group>
                        		<field name="text"/>
                        	</group>
						</sheet>
					</form>
				</field>
			</record>
	
			<record id="library_review_tree_view" model="ir.ui.view">
				<field name="name">Library Review Tree view</field>
				<field name="model">library.review</field>
				<field name="arch" type="xml">
					<tree string="Reviews" decoration-success="rating == '5'" decoration-info="rating == '4'"
										   decoration-primary="rating == '3'" decoration-warning="rating == '2'"
										   decoration-danger="rating == '1'" edit="0">
						<field name="employee_id" widget="many2one_avatar_employee"/>
						<field name="book_id"/>
						<field name="rating"/>
						<field name="rating" string="stars" widget="priority" optional="hide"/>
					</tree>
				</field>
			</record>
			
			<record id="library_review_search_view" model="ir.ui.view">
				<field name="name">Library Review Search view</field>
				<field name="model">library.review</field>
				<field name="arch" type="xml">
					<search string="Search Reviews">
						<field name="book_id" filter_domain="[('book_id.title','ilike',self)]"/>
						<field name="employee_id" filter_domain="[('employee_id.name','ilike',self)]"/>
						<filter string="Approved" domain="['|','|',('rating','=','3'),('rating','=','4'),('rating','=','5')]" name="approved" />
						<filter string="Not approved" domain="['|','|',('rating','=','2'),('rating','=','1'),('rating','=','0')]" name="not_approved" />
						<group string="Group by">
							<filter string="By rating" name="rating_group" context="{'group_by':'rating'}" />
							<filter string="By employee" name="employee_id_group" context="{'group_by':'employee_id'}" />
							<filter string="By book" name="book_id_group" context="{'group_by':'book_id'}" />
						</group>
					</search>
					<searchpanel>
						<field name="employee_id" />
					</searchpanel>
				</field>
			</record>
		</data>
</odoo>


